basePath: /
definitions:
  github_com_msniranjan18_chit-chat_pkg_models.AuthRequest:
    properties:
      device_id:
        type: string
      name:
        type: string
      phone:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.AuthResponse:
    properties:
      expires_at:
        type: string
      token:
        type: string
      user:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.Chat:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      created_by:
        type: string
      description:
        type: string
      id:
        type: string
      is_archived:
        type: boolean
      is_muted:
        type: boolean
      is_pinned:
        type: boolean
      last_activity:
        type: string
      last_message:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
      name:
        type: string
      type:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatType'
      unread_count:
        type: integer
      updated_at:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatListResponse:
    properties:
      chats:
        items:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Chat'
        type: array
      limit:
        type: integer
      page:
        type: integer
      total:
        type: integer
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatMember:
    properties:
      banned_until:
        type: string
      chat_id:
        type: string
      display_name:
        type: string
      is_admin:
        type: boolean
      is_banned:
        type: boolean
      joined_at:
        type: string
      last_read_at:
        type: string
      role:
        type: string
      user_id:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatMemberRequest:
    properties:
      display_name:
        type: string
      role:
        type: string
      user_id:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatRequest:
    properties:
      avatar_url:
        type: string
      description:
        type: string
      name:
        type: string
      type:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatType'
      user_ids:
        description: 'For direct chat: [other_user_id], For group: all members'
        items:
          type: string
        type: array
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatResponse:
    properties:
      chat:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Chat'
      members:
        items:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatMember'
        type: array
      users:
        items:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
        type: array
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.ChatType:
    enum:
    - direct
    - group
    - channel
    type: string
    x-enum-varnames:
    - ChatTypeDirect
    - ChatTypeGroup
    - ChatTypeChannel
  github_com_msniranjan18_chit-chat_pkg_models.ChatUpdateRequest:
    properties:
      avatar_url:
        type: string
      description:
        type: string
      is_archived:
        type: boolean
      is_muted:
        type: boolean
      is_pinned:
        type: boolean
      name:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.Message:
    properties:
      chat_id:
        type: string
      content:
        type: string
      content_type:
        type: string
      deleted_at:
        type: string
      delivered_at:
        type: string
      duration:
        description: For audio/video
        type: integer
      edited_at:
        type: string
      file_size:
        type: integer
      forward_from:
        type: string
      forwarded:
        type: boolean
      id:
        type: string
      is_deleted:
        type: boolean
      is_edited:
        type: boolean
      media_url:
        type: string
      read_at:
        type: string
      reply_message:
        $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
      reply_to:
        type: string
      sender_id:
        type: string
      sender_name:
        type: string
      sent_at:
        type: string
      status:
        type: string
      thumbnail_url:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.MessageRequest:
    properties:
      chat_id:
        type: string
      content:
        type: string
      content_type:
        type: string
      forward_from:
        type: string
      forwarded:
        type: boolean
      reply_to:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.MessageUpdateRequest:
    properties:
      content:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.User:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      id:
        type: string
      is_online:
        type: boolean
      last_seen:
        type: string
      name:
        type: string
      phone:
        type: string
      status:
        type: string
      updated_at:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.UserSession:
    properties:
      created_at:
        type: string
      device_info:
        type: string
      ip_address:
        type: string
      is_active:
        type: boolean
      last_active:
        type: string
      session_id:
        type: string
      user_id:
        type: string
    type: object
  github_com_msniranjan18_chit-chat_pkg_models.UserUpdateRequest:
    properties:
      name:
        type: string
      status:
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: This is a real-time chat application server.
  title: Chit-Chat API
  version: "1.0"
paths:
  /api/auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates a user by phone number and returns a new session
        token.
      parameters:
      - description: Login Details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.AuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.AuthResponse'
        "404":
          description: User not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Login user
      tags:
      - auth
  /api/auth/logout:
    post:
      description: Deletes the current user session and invalidates the session ID.
      responses:
        "200":
          description: Logged out successfully
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Not authenticated
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Logout user
      tags:
      - auth
  /api/auth/refresh:
    post:
      description: Takes an existing valid JWT and returns a new token with an extended
        expiration time.
      parameters:
      - default: Bearer <token>
        description: Insert your Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Returns new token and expires_at
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid or missing token
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Refresh session token
      tags:
      - auth
  /api/auth/register:
    post:
      consumes:
      - application/json
      description: Creates a new user profile or logs in an existing user based on
        their phone number. Returns a JWT token and user details.
      parameters:
      - description: Registration/Login Details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.AuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successful login for existing user
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.AuthResponse'
        "201":
          description: Successful registration for new user
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.AuthResponse'
        "400":
          description: Invalid request body or phone number
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Register or login a user
      tags:
      - auth
  /api/auth/verify:
    get:
      description: Checks if the current JWT token is valid and returns the authenticated
        user's profile.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
        "401":
          description: Not authenticated
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Verify authentication
      tags:
      - auth
  /api/chats:
    get:
      description: Retrieve a list of all chats (Direct and Group) that the current
        user is a member of
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatListResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user chats
      tags:
      - chats
    post:
      consumes:
      - application/json
      description: Create a new direct chat (1-on-1) or group chat
      parameters:
      - description: Chat Creation Request
        in: body
        name: chat
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Returned if direct chat already exists
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatResponse'
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatResponse'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a new chat
      tags:
      - chats
  /api/chats/{id}:
    delete:
      description: Permanently delete a chat and all its messages (Creator only)
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "403":
          description: Forbidden - Only creator can delete
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete a chat
      tags:
      - chats
    get:
      description: Retrieve detailed information about a specific chat, including
        member list and user details
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get chat details
      tags:
      - chats
    put:
      consumes:
      - application/json
      description: Update name, description, or settings for a specific chat (Admins
        only)
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      - description: Chat Update Fields
        in: body
        name: updates
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Chat'
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update chat details
      tags:
      - chats
  /api/chats/{id}/leave:
    post:
      description: Remove yourself from a group chat
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: Left chat successfully
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Leave a chat
      tags:
      - chats
  /api/chats/{id}/members:
    get:
      description: Retrieve a list of all members in a specific chat, including their
        roles and join dates. The requester must be a member of the chat.
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatMember'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found or access denied
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get members of a chat
      tags:
      - chats
    post:
      consumes:
      - application/json
      description: Add a new user to an existing group chat
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      - description: Member Details
        in: body
        name: member
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.ChatMemberRequest'
      responses:
        "201":
          description: Member added successfully
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Add member to chat
      tags:
      - chats
  /api/chats/{id}/members/{memberId}:
    delete:
      description: Remove a specific user from a group chat
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      - description: User ID to remove
        in: path
        name: memberId
        required: true
        type: string
      responses:
        "204":
          description: No Content
      summary: Remove member from chat
      tags:
      - chats
  /api/chats/{id}/read:
    post:
      description: Mark all messages in a chat as read for the current user
      parameters:
      - description: Chat ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: Chat marked as read
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Mark chat as read
      tags:
      - chats
  /api/chats/search:
    get:
      description: Search for chats by name or description
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - description: Filter by type (direct/group)
        in: query
        name: type
        type: string
      - description: Limit results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Chat'
            type: array
      summary: Search user chats
      tags:
      - chats
  /api/contacts:
    get:
      description: Retrieve the contact list for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user contacts
      tags:
      - contacts
    post:
      consumes:
      - application/json
      description: Add another user to the current user's contact list
      parameters:
      - description: Contact Request (user_id required)
        in: body
        name: contact
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Contact added
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Add a contact
      tags:
      - contacts
  /api/contacts/{id}:
    delete:
      description: Delete a user from the current user's contact list
      parameters:
      - description: Contact User ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: ID required
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Remove a contact
      tags:
      - contacts
  /api/messages:
    get:
      description: Retrieve a paginated list of messages for a specific chat. Requires
        chat_id and supports pagination via 'before' (message_id) and 'limit'.
      parameters:
      - description: Chat ID
        in: query
        name: chat_id
        required: true
        type: string
      - description: Message ID to get messages before (for pagination)
        in: query
        name: before
        type: string
      - description: Number of messages to return (default 20, max 50)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
            type: array
        "400":
          description: Chat ID required
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found or access denied
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get messages from a chat
      tags:
      - messages
    post:
      consumes:
      - application/json
      description: Send a new message to a specific chat (Direct or Group).
      parameters:
      - description: Message Details
        in: body
        name: message
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.MessageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
        "400":
          description: Invalid request body
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Send a message
      tags:
      - messages
  /api/messages/{id}:
    delete:
      description: Permanently delete a message for all participants.
      parameters:
      - description: Message ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Message not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Delete a message
      tags:
      - messages
    put:
      consumes:
      - application/json
      description: Update the text content of a previously sent message. Only the
        sender can edit their own message.
      parameters:
      - description: Message ID
        in: path
        name: id
        required: true
        type: string
      - description: New Content
        in: body
        name: updates
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.MessageUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
        "403":
          description: Forbidden - Not the sender
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Message not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Edit a message
      tags:
      - messages
  /api/messages/{id}/read:
    post:
      description: Updates the status of a specific message to 'read'.
      parameters:
      - description: Message ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "200":
          description: Marked as read
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Mark message as read
      tags:
      - messages
  /api/messages/search:
    get:
      description: Search for text within messages of a specific chat.
      parameters:
      - description: Chat ID
        in: query
        name: chat_id
        required: true
        type: string
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - description: Limit results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.Message'
            type: array
        "400":
          description: Query required
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Search messages
      tags:
      - messages
  /api/users/{id}:
    get:
      description: Retrieve profile details for a specific user ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
        "400":
          description: ID required
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user by ID
      tags:
      - users
  /api/users/me:
    get:
      description: Retrieve the profile details of the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get current user profile
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Update name or status for the current user
      parameters:
      - description: User Update Request
        in: body
        name: updates
        required: true
        schema:
          $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.UserUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
        "400":
          description: Invalid request body
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update user profile
      tags:
      - users
  /api/users/online:
    get:
      description: Retrieve a list of users currently marked as online
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get online users
      tags:
      - users
  /api/users/search:
    get:
      description: Find users by phone number or name
      parameters:
      - description: Search query
        in: query
        name: q
        required: true
        type: string
      - description: Limit results (default 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.User'
            type: array
        "400":
          description: Query required
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Search for users
      tags:
      - users
  /api/users/sessions:
    get:
      description: Retrieve the active login sessions for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_msniranjan18_chit-chat_pkg_models.UserSession'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user sessions
      tags:
      - users
  /ws:
    get:
      description: Upgrades the HTTP connection to a WebSocket for real-time messaging.
        Requires a valid JWT token as a query parameter.
      parameters:
      - description: Valid JWT Token
        in: query
        name: token
        required: true
        type: string
      responses:
        "101":
          description: Switching Protocols
          schema:
            type: string
        "401":
          description: Invalid or missing token
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Establish WebSocket connection
      tags:
      - websocket
swagger: "2.0"
