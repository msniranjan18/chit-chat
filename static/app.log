app-1  | timestamp=2026-01-17T09:20:02.796Z level=INFO message="Starting ChitChat server" port=8080 environment=development log_level=DEBUG
app-1  | timestamp=2026-01-17T09:20:02.796Z level=INFO message="Initializing storage..."
app-1  | timestamp=2026-01-17T09:20:02.796Z level=INFO message="Initializing store" postgres_conn=postgres://usr-chitchat:pwd-chitchat@postgres:5432 redis_addr=redis://redis:6379
app-1  | timestamp=2026-01-17T09:20:02.799Z level=INFO message="PostgreSQL connection successful" attempt=1
app-1  | timestamp=2026-01-17T09:20:02.799Z level=DEBUG message="PostgreSQL connection pool configured" max_open_conns=25 max_idle_conns=5 conn_max_lifetime=5m
app-1  | timestamp=2026-01-17T09:20:02.799Z level=INFO message="Initializing Redis connection" component=redis url=redis://redis:6379
app-1  | timestamp=2026-01-17T09:20:02.799Z level=DEBUG message="Redis client configured" component=redis pool_size=100 min_idle_conns=10 max_retries=3 dial_timeout=5s read_timeout=3s write_timeout=3s pool_timeout=4s use_tls=false
app-1  | timestamp=2026-01-17T09:20:02.800Z level=INFO message="Redis connected successfully" component=redis connection_time=379.041µs address=redis:6379 database=0
app-1  | timestamp=2026-01-17T09:20:02.800Z level=INFO message="Successfully connected to PostgreSQL and Redis"
app-1  | timestamp=2026-01-17T09:20:02.800Z level=INFO message="Initializing database schema..."
app-1  | timestamp=2026-01-17T09:20:02.800Z level=INFO message="Initializing database schema"
app-1  | timestamp=2026-01-17T09:20:02.840Z level=INFO message="Database schema initialized successfully"
app-1  | timestamp=2026-01-17T09:20:02.840Z level=DEBUG message="Cleanup worker started" interval=1h max_age=30d
app-1  | timestamp=2026-01-17T09:20:02.840Z level=INFO message="Initializing authentication..."
app-1  | timestamp=2026-01-17T09:20:02.840Z level=INFO message="Initializing WebSocket hub..."
app-1  | timestamp=2026-01-17T09:20:02.840Z level=DEBUG message="WebSocket hub initialized and running"
app-1  | timestamp=2026-01-17T09:20:02.840Z level=INFO message="Setting up routes..."
app-1  | timestamp=2026-01-17T09:20:02.841Z level=DEBUG message="Static file server configured" path=/static/
app-1  | timestamp=2026-01-17T09:20:02.841Z level=DEBUG message="Swagger UI configured" path=/swagger/
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="Starting cleanup worker" interval=1h0m0s max_age=720h0m0s
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="WebSocket hub started"
app-1  | timestamp=2026-01-17T09:20:02.841Z level=DEBUG message="WebSocket endpoint configured" path=/ws
app-1  | timestamp=2026-01-17T09:20:02.841Z level=DEBUG message="Public authentication endpoints configured" endpoints="[/api/auth/register /api/auth/login /api/auth/refresh]"
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="API routes configured" auth_endpoints=2 user_endpoints=8 contact_endpoints=3 chat_endpoints=14 message_endpoints=7
app-1  | timestamp=2026-01-17T09:20:02.841Z level=DEBUG message="SPA catch-all route configured" serve_from=./static/index.html
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="ChitChat server starting" address=:8080 read_timeout=15s write_timeout=15s idle_timeout=1m0s
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="Server is ready to accept connections"
app-1  | timestamp=2026-01-17T09:20:02.841Z level=INFO message="Listening for Redis Pub/Sub messages"
app-1  | timestamp=2026-01-17T09:21:26.681Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/register remote_addr=172.30.0.1:37500 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.681Z level=INFO message="Register: processing registration" phone=1111111111 name=Alice
app-1  | timestamp=2026-01-17T09:21:26.681Z level=DEBUG message="Getting user by phone" phone=1111111111
app-1  | timestamp=2026-01-17T09:21:26.682Z level=DEBUG message="User not found by phone" phone=1111111111
app-1  | timestamp=2026-01-17T09:21:26.682Z level=INFO message="Creating user" phone=1111111111 name=Alice
app-1  | timestamp=2026-01-17T09:21:26.683Z level=INFO message="User created successfully" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 phone=1111111111
app-1  | timestamp=2026-01-17T09:21:26.683Z level=INFO message="Register: new user created" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 phone=1111111111 name=Alice
app-1  | timestamp=2026-01-17T09:21:26.683Z level=DEBUG message="Register: creating user session" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 session_id=3e66df62-e2d9-43e6-9121-24db32942060 device=curl/8.7.1 ip=172.30.0.1
app-1  | timestamp=2026-01-17T09:21:26.683Z level=INFO message="Creating user session" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 session_id=3e66df62-e2d9-43e6-9121-24db32942060 device_info=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.684Z level=INFO message="User session created successfully" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 session_id=3e66df62-e2d9-43e6-9121-24db32942060
app-1  | timestamp=2026-01-17T09:21:26.684Z level=INFO message="Register: successful" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 session_id=3e66df62-e2d9-43e6-9121-24db32942060 expires_at=2026-01-24T09:21:26.684Z
app-1  | timestamp=2026-01-17T09:21:26.684Z level=INFO message="HTTP request completed" method=POST path=/api/auth/register status=200 duration=2.671625ms remote_addr=172.30.0.1:37500 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.712Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/register remote_addr=172.30.0.1:37516 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.712Z level=INFO message="Register: processing registration" phone=2222222222 name=Bob
app-1  | timestamp=2026-01-17T09:21:26.712Z level=DEBUG message="Getting user by phone" phone=2222222222
app-1  | timestamp=2026-01-17T09:21:26.713Z level=DEBUG message="User not found by phone" phone=2222222222
app-1  | timestamp=2026-01-17T09:21:26.713Z level=INFO message="Creating user" phone=2222222222 name=Bob
app-1  | timestamp=2026-01-17T09:21:26.713Z level=INFO message="User created successfully" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 phone=2222222222
app-1  | timestamp=2026-01-17T09:21:26.713Z level=INFO message="Register: new user created" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 phone=2222222222 name=Bob
app-1  | timestamp=2026-01-17T09:21:26.713Z level=DEBUG message="Register: creating user session" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 session_id=6d0d6a8c-665e-402d-b087-6e557673359e device=curl/8.7.1 ip=172.30.0.1
app-1  | timestamp=2026-01-17T09:21:26.713Z level=INFO message="Creating user session" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 session_id=6d0d6a8c-665e-402d-b087-6e557673359e device_info=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.714Z level=INFO message="User session created successfully" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 session_id=6d0d6a8c-665e-402d-b087-6e557673359e
app-1  | timestamp=2026-01-17T09:21:26.714Z level=INFO message="Register: successful" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 session_id=6d0d6a8c-665e-402d-b087-6e557673359e expires_at=2026-01-24T09:21:26.714Z
app-1  | timestamp=2026-01-17T09:21:26.714Z level=INFO message="HTTP request completed" method=POST path=/api/auth/register status=200 duration=1.681833ms remote_addr=172.30.0.1:37516 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.742Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/register remote_addr=172.30.0.1:37530 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.742Z level=INFO message="Register: processing registration" phone=3333333333 name=Charlie
app-1  | timestamp=2026-01-17T09:21:26.742Z level=DEBUG message="Getting user by phone" phone=3333333333
app-1  | timestamp=2026-01-17T09:21:26.743Z level=DEBUG message="User not found by phone" phone=3333333333
app-1  | timestamp=2026-01-17T09:21:26.743Z level=INFO message="Creating user" phone=3333333333 name=Charlie
app-1  | timestamp=2026-01-17T09:21:26.743Z level=INFO message="User created successfully" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 phone=3333333333
app-1  | timestamp=2026-01-17T09:21:26.743Z level=INFO message="Register: new user created" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 phone=3333333333 name=Charlie
app-1  | timestamp=2026-01-17T09:21:26.743Z level=DEBUG message="Register: creating user session" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 session_id=6e0c3394-551c-4893-a5b8-cbfe5888566f device=curl/8.7.1 ip=172.30.0.1
app-1  | timestamp=2026-01-17T09:21:26.743Z level=INFO message="Creating user session" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 session_id=6e0c3394-551c-4893-a5b8-cbfe5888566f device_info=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.744Z level=INFO message="User session created successfully" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 session_id=6e0c3394-551c-4893-a5b8-cbfe5888566f
app-1  | timestamp=2026-01-17T09:21:26.744Z level=INFO message="Register: successful" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 session_id=6e0c3394-551c-4893-a5b8-cbfe5888566f expires_at=2026-01-24T09:21:26.744Z
app-1  | timestamp=2026-01-17T09:21:26.744Z level=INFO message="HTTP request completed" method=POST path=/api/auth/register status=200 duration=1.833334ms remote_addr=172.30.0.1:37530 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.771Z level=DEBUG message="HTTP request received" method=PUT path=/api/users/me remote_addr=172.30.0.1:37534 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.771Z level=DEBUG message="API request received" method=PUT path=/api/users/me query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.771Z level=INFO message="UpdateUser: updating user" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.771Z level=DEBUG message="UpdateUser: update request" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 request="{Name: Status:Feeling coding-tastic}"
app-1  | timestamp=2026-01-17T09:21:26.771Z level=INFO message="Updating user" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 updates="&{Name: Status:Feeling coding-tastic}"
app-1  | timestamp=2026-01-17T09:21:26.773Z level=INFO message="User updated successfully" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.773Z level=DEBUG message="Getting user by ID" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.773Z level=DEBUG message="User retrieved by ID" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 name=""
app-1  | timestamp=2026-01-17T09:21:26.773Z level=INFO message="UpdateUser: user updated successfully" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.773Z level=INFO message="HTTP request completed" method=PUT path=/api/users/me status=200 duration=1.731ms remote_addr=172.30.0.1:37534 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.786Z level=DEBUG message="HTTP request received" method=GET path=/api/users/search remote_addr=172.30.0.1:37544 user_agent=curl/8.7.1 query="q=Bob"
app-1  | timestamp=2026-01-17T09:21:26.786Z level=DEBUG message="API request received" method=GET path=/api/users/search query="q=Bob" content_type=""
app-1  | timestamp=2026-01-17T09:21:26.786Z level=INFO message="SearchUsers: searching users" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 query=Bob
app-1  | timestamp=2026-01-17T09:21:26.786Z level=DEBUG message="SearchUsers: search parameters" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 query=Bob limit=20
app-1  | timestamp=2026-01-17T09:21:26.786Z level=INFO message="Searching users" query=Bob limit=20
app-1  | timestamp=2026-01-17T09:21:26.787Z level=INFO message="User search completed" query=Bob results=1 limit=20
app-1  | timestamp=2026-01-17T09:21:26.787Z level=DEBUG message="SearchUsers: search completed" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 query=Bob found=1 filtered=1
app-1  | timestamp=2026-01-17T09:21:26.787Z level=INFO message="HTTP request completed" method=GET path=/api/users/search status=200 duration=1.069625ms remote_addr=172.30.0.1:37544 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.809Z level=DEBUG message="HTTP request received" method=POST path=/api/contacts remote_addr=172.30.0.1:37554 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.809Z level=DEBUG message="API request received" method=POST path=/api/contacts query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.809Z level=INFO message="AddContact: adding contact" requester_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.809Z level=WARN message="AddContact: missing target user ID" requester_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.809Z level=WARN message="HTTP request completed" method=POST path=/api/contacts status=400 duration=156.208µs remote_addr=172.30.0.1:37554 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.809Z level=DEBUG message="Request details for error" method=POST path=/api/contacts query="" headers="map[Accept:[*/*] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMzA0NmY3YTYtN2UzZi00NmUwLTkzYjktZWQzZjc4MzJmNTU0Iiwic2Vzc2lvbl9pZCI6IjNlNjZkZjYyLWUyZDktNDNlNi05MTIxLTI0ZGIzMjk0MjA2MCIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MjQ2NDg2LCJpYXQiOjE3Njg2NDE2ODZ9.FiT76kcl5Ok5MdpPdM7nqHxSPcRrtcNnm0hkJrU8Xjw] Content-Length:[53] Content-Type:[application/json] User-Agent:[curl/8.7.1]]"
app-1  | timestamp=2026-01-17T09:21:26.823Z level=DEBUG message="HTTP request received" method=POST path=/api/contacts remote_addr=172.30.0.1:37564 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.823Z level=DEBUG message="API request received" method=POST path=/api/contacts query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.823Z level=INFO message="AddContact: adding contact" requester_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.823Z level=WARN message="AddContact: missing target user ID" requester_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.823Z level=WARN message="HTTP request completed" method=POST path=/api/contacts status=400 duration=115.583µs remote_addr=172.30.0.1:37564 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.823Z level=DEBUG message="Request details for error" method=POST path=/api/contacts query="" headers="map[Accept:[*/*] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMzA0NmY3YTYtN2UzZi00NmUwLTkzYjktZWQzZjc4MzJmNTU0Iiwic2Vzc2lvbl9pZCI6IjNlNjZkZjYyLWUyZDktNDNlNi05MTIxLTI0ZGIzMjk0MjA2MCIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MjQ2NDg2LCJpYXQiOjE3Njg2NDE2ODZ9.FiT76kcl5Ok5MdpPdM7nqHxSPcRrtcNnm0hkJrU8Xjw] Content-Length:[53] Content-Type:[application/json] User-Agent:[curl/8.7.1]]"
app-1  | timestamp=2026-01-17T09:21:26.837Z level=DEBUG message="HTTP request received" method=POST path=/api/chats remote_addr=172.30.0.1:37574 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.837Z level=DEBUG message="API request received" method=POST path=/api/chats query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.837Z level=INFO message="CreateChat: creating new chat" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 type=group name=0x400017ff00 user_count=2
app-1  | timestamp=2026-01-17T09:21:26.837Z level=INFO message="Creating chat" type=group name=0x400017ff00 created_by=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 user_count=2
app-1  | timestamp=2026-01-17T09:21:26.838Z level=DEBUG message="Chat created in database" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.839Z level=DEBUG message="Added creator as chat member" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.839Z level=DEBUG message="Added chat member" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4
app-1  | timestamp=2026-01-17T09:21:26.839Z level=DEBUG message="Added chat member" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="Created group settings" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="Invalidating user chats cache" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="User chats cache invalidated" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 key=chats:3046f7a6-7e3f-46e0-93b9-ed3f7832f554 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="Invalidating user chats cache" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="User chats cache invalidated" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 key=chats:3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="Invalidating user chats cache" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="User chats cache invalidated" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 key=chats:8585e1d2-9f54-4790-a9df-5fcebcd5d245 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:26.840Z level=INFO message="Chat created successfully" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 type=group total_members=3
app-1  | timestamp=2026-01-17T09:21:26.840Z level=INFO message="CreateChat: chat created successfully" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 type=group
app-1  | timestamp=2026-01-17T09:21:26.840Z level=DEBUG message="Getting chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.841Z level=DEBUG message="Retrieved chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 member_count=3
app-1  | timestamp=2026-01-17T09:21:26.841Z level=INFO message="HTTP request completed" method=POST path=/api/chats status=201 duration=4.236875ms remote_addr=172.30.0.1:37574 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.862Z level=DEBUG message="HTTP request received" method=POST path=/api/messages remote_addr=172.30.0.1:37590 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.862Z level=DEBUG message="API request received" method=POST path=/api/messages query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.862Z level=INFO message="SendMessage: sending message" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 content_type=text
app-1  | timestamp=2026-01-17T09:21:26.862Z level=DEBUG message="Checking chat membership" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.862Z level=DEBUG message="User is a chat member" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.862Z level=INFO message="Saving message" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 sender_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 content_type=text has_reply=false forwarded=false
app-1  | timestamp=2026-01-17T09:21:26.863Z level=DEBUG message="Message inserted in database" message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d
app-1  | timestamp=2026-01-17T09:21:26.863Z level=DEBUG message="Getting chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.867Z level=DEBUG message="Retrieved chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 member_count=3
app-1  | timestamp=2026-01-17T09:21:26.867Z level=DEBUG message="Setting message status for members" message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d member_count=3
app-1  | timestamp=2026-01-17T09:21:26.869Z level=DEBUG message="Invalidating chat messages cache" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.869Z level=DEBUG message="Chat messages cache invalidated" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 key=messages:240bcf42-fa54-4a0d-861c-ea5c9a14c565 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:26.869Z level=INFO message="Message saved successfully" message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 sender_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554
app-1  | timestamp=2026-01-17T09:21:26.869Z level=DEBUG message="Getting chat" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.870Z level=DEBUG message="Chat retrieved" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 type=group
app-1  | timestamp=2026-01-17T09:21:26.870Z level=DEBUG message="Getting chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.870Z level=DEBUG message="Retrieved chat members" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 member_count=3
app-1  | timestamp=2026-01-17T09:21:26.870Z level=DEBUG message="Getting users by IDs" user_count=3
app-1  | timestamp=2026-01-17T09:21:26.870Z level=DEBUG message="Users retrieved by IDs" requested=3 found=3
app-1  | timestamp=2026-01-17T09:21:26.870Z level=INFO message="SendMessage: message sent successfully" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d
app-1  | timestamp=2026-01-17T09:21:26.870Z level=INFO message="HTTP request completed" method=POST path=/api/messages status=201 duration=8.155459ms remote_addr=172.30.0.1:37590 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.892Z level=DEBUG message="HTTP request received" method=POST path=/api/messages/status remote_addr=172.30.0.1:37606 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.893Z level=DEBUG message="API request received" method=POST path=/api/messages/status query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.893Z level=DEBUG message="UpdateMessageStatus: updating status" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d status=read
app-1  | timestamp=2026-01-17T09:21:26.893Z level=INFO message="Updating message status" message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 status=read
app-1  | timestamp=2026-01-17T09:21:26.894Z level=DEBUG message="Invalidating chat messages cache" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.894Z level=DEBUG message="Chat messages cache invalidated" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 key=messages:240bcf42-fa54-4a0d-861c-ea5c9a14c565 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:26.894Z level=INFO message="Message status updated successfully" message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 status=read
app-1  | timestamp=2026-01-17T09:21:26.894Z level=DEBUG message="UpdateMessageStatus: status updated successfully" user_id=3b7d375a-d6a5-448b-b3a7-6297cf5ca3a4 message_id=e0d36093-4f0e-4a74-9c37-99f795104f2d status=read
app-1  | timestamp=2026-01-17T09:21:26.894Z level=INFO message="HTTP request completed" method=POST path=/api/messages/status status=200 duration=1.943334ms remote_addr=172.30.0.1:37606 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="HTTP request received" method=GET path=/api/messages remote_addr=172.30.0.1:37612 user_agent=curl/8.7.1 query="chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565"
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="API request received" method=GET path=/api/messages query="chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565" content_type=""
app-1  | timestamp=2026-01-17T09:21:26.906Z level=INFO message="GetMessages: fetching messages" user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="Checking chat membership" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="User is a chat member" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="GetMessages: pagination" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 offset=0 limit=50
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="Getting messages" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 offset=0 limit=50
app-1  | timestamp=2026-01-17T09:21:26.906Z level=DEBUG message="Getting cached chat messages" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Chat messages not found in cache" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 key=messages:240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Retrieved messages from database" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 message_count=1
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Getting users by IDs" user_count=1
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Caching chat messages" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 message_count=1
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Chat messages cached successfully" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 key=messages:240bcf42-fa54-4a0d-861c-ea5c9a14c565 message_count=1 ttl=5m
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="Users retrieved by IDs" requested=1 found=1
app-1  | timestamp=2026-01-17T09:21:26.907Z level=DEBUG message="GetMessages: retrieved messages" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 user_id=8585e1d2-9f54-4790-a9df-5fcebcd5d245 message_count=1
app-1  | timestamp=2026-01-17T09:21:26.907Z level=INFO message="HTTP request completed" method=GET path=/api/messages status=200 duration=1.8655ms remote_addr=172.30.0.1:37612 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.932Z level=DEBUG message="HTTP request received" method=POST path=/api/chats/240bcf42-fa54-4a0d-861c-ea5c9a14c565/leave remote_addr=172.30.0.1:37618 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.932Z level=DEBUG message="API request received" method=POST path=/api/chats/240bcf42-fa54-4a0d-861c-ea5c9a14c565/leave query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.932Z level=INFO message="LeaveChat: user attempting to leave chat" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.932Z level=DEBUG message="Getting chat" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565
app-1  | timestamp=2026-01-17T09:21:26.933Z level=DEBUG message="Chat retrieved" chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 type=group
app-1  | timestamp=2026-01-17T09:21:26.933Z level=WARN message="LeaveChat: group creator cannot leave" user_id=3046f7a6-7e3f-46e0-93b9-ed3f7832f554 chat_id=240bcf42-fa54-4a0d-861c-ea5c9a14c565 chat_type=group
app-1  | timestamp=2026-01-17T09:21:26.933Z level=WARN message="HTTP request completed" method=POST path=/api/chats/240bcf42-fa54-4a0d-861c-ea5c9a14c565/leave status=400 duration=739.375µs remote_addr=172.30.0.1:37618 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:26.933Z level=DEBUG message="Request details for error" method=POST path=/api/chats/240bcf42-fa54-4a0d-861c-ea5c9a14c565/leave query="" headers="map[Accept:[*/*] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMzA0NmY3YTYtN2UzZi00NmUwLTkzYjktZWQzZjc4MzJmNTU0Iiwic2Vzc2lvbl9pZCI6IjNlNjZkZjYyLWUyZDktNDNlNi05MTIxLTI0ZGIzMjk0MjA2MCIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MjQ2NDg2LCJpYXQiOjE3Njg2NDE2ODZ9.FiT76kcl5Ok5MdpPdM7nqHxSPcRrtcNnm0hkJrU8Xjw] Content-Length:[2] Content-Type:[application/json] User-Agent:[curl/8.7.1]]"
app-1  | timestamp=2026-01-17T09:21:26.946Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/logout remote_addr=172.30.0.1:37632 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:26.946Z level=DEBUG message="API request received" method=POST path=/api/auth/logout query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:26.946Z level=INFO message="Logout: processing logout" session_id=3e66df62-e2d9-43e6-9121-24db32942060
app-1  | timestamp=2026-01-17T09:21:26.946Z level=INFO message="Deleting session" session_id=3e66df62-e2d9-43e6-9121-24db32942060
app-1  | timestamp=2026-01-17T09:21:26.947Z level=INFO message="Session deleted successfully" session_id=3e66df62-e2d9-43e6-9121-24db32942060
app-1  | timestamp=2026-01-17T09:21:26.947Z level=INFO message="Logout: successful" session_id=3e66df62-e2d9-43e6-9121-24db32942060
app-1  | timestamp=2026-01-17T09:21:26.947Z level=INFO message="HTTP request completed" method=POST path=/api/auth/logout status=200 duration=1.018292ms remote_addr=172.30.0.1:37632 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.168Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/register remote_addr=172.30.0.1:33524 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:31.168Z level=INFO message="Register: processing registration" phone=9575417548 name=Manav
app-1  | timestamp=2026-01-17T09:21:31.168Z level=DEBUG message="Getting user by phone" phone=9575417548
app-1  | timestamp=2026-01-17T09:21:31.168Z level=DEBUG message="User not found by phone" phone=9575417548
app-1  | timestamp=2026-01-17T09:21:31.169Z level=INFO message="Creating user" phone=9575417548 name=Manav
app-1  | timestamp=2026-01-17T09:21:31.169Z level=INFO message="User created successfully" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 phone=9575417548
app-1  | timestamp=2026-01-17T09:21:31.169Z level=INFO message="Register: new user created" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 phone=9575417548 name=Manav
app-1  | timestamp=2026-01-17T09:21:31.169Z level=DEBUG message="Register: creating user session" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 session_id=80a34d43-99ce-4fe6-8fff-3ad048b35dea device=curl/8.7.1 ip=172.30.0.1
app-1  | timestamp=2026-01-17T09:21:31.169Z level=INFO message="Creating user session" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 session_id=80a34d43-99ce-4fe6-8fff-3ad048b35dea device_info=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.170Z level=INFO message="User session created successfully" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 session_id=80a34d43-99ce-4fe6-8fff-3ad048b35dea
app-1  | timestamp=2026-01-17T09:21:31.170Z level=INFO message="Register: successful" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 session_id=80a34d43-99ce-4fe6-8fff-3ad048b35dea expires_at=2026-01-24T09:21:31.170Z
app-1  | timestamp=2026-01-17T09:21:31.170Z level=INFO message="HTTP request completed" method=POST path=/api/auth/register status=200 duration=2.259958ms remote_addr=172.30.0.1:33524 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.210Z level=DEBUG message="HTTP request received" method=POST path=/api/auth/register remote_addr=172.30.0.1:33526 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:31.210Z level=INFO message="Register: processing registration" phone=8120890722 name=Sami
app-1  | timestamp=2026-01-17T09:21:31.210Z level=DEBUG message="Getting user by phone" phone=8120890722
app-1  | timestamp=2026-01-17T09:21:31.210Z level=DEBUG message="User not found by phone" phone=8120890722
app-1  | timestamp=2026-01-17T09:21:31.210Z level=INFO message="Creating user" phone=8120890722 name=Sami
app-1  | timestamp=2026-01-17T09:21:31.211Z level=INFO message="User created successfully" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 phone=8120890722
app-1  | timestamp=2026-01-17T09:21:31.211Z level=INFO message="Register: new user created" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 phone=8120890722 name=Sami
app-1  | timestamp=2026-01-17T09:21:31.211Z level=DEBUG message="Register: creating user session" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 session_id=e5c4dcd2-c578-4f10-a76f-1374256c23d3 device=curl/8.7.1 ip=172.30.0.1
app-1  | timestamp=2026-01-17T09:21:31.211Z level=INFO message="Creating user session" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 session_id=e5c4dcd2-c578-4f10-a76f-1374256c23d3 device_info=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.212Z level=INFO message="User session created successfully" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 session_id=e5c4dcd2-c578-4f10-a76f-1374256c23d3
app-1  | timestamp=2026-01-17T09:21:31.212Z level=INFO message="Register: successful" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 session_id=e5c4dcd2-c578-4f10-a76f-1374256c23d3 expires_at=2026-01-24T09:21:31.212Z
app-1  | timestamp=2026-01-17T09:21:31.212Z level=INFO message="HTTP request completed" method=POST path=/api/auth/register status=200 duration=1.785333ms remote_addr=172.30.0.1:33526 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.251Z level=DEBUG message="HTTP request received" method=GET path=/api/users/search remote_addr=172.30.0.1:33542 user_agent=curl/8.7.1 query="q=Sami"
app-1  | timestamp=2026-01-17T09:21:31.251Z level=DEBUG message="API request received" method=GET path=/api/users/search query="q=Sami" content_type=""
app-1  | timestamp=2026-01-17T09:21:31.251Z level=INFO message="SearchUsers: searching users" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 query=Sami
app-1  | timestamp=2026-01-17T09:21:31.251Z level=DEBUG message="SearchUsers: search parameters" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 query=Sami limit=20
app-1  | timestamp=2026-01-17T09:21:31.251Z level=INFO message="Searching users" query=Sami limit=20
app-1  | timestamp=2026-01-17T09:21:31.251Z level=INFO message="User search completed" query=Sami results=1 limit=20
app-1  | timestamp=2026-01-17T09:21:31.251Z level=DEBUG message="SearchUsers: search completed" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 query=Sami found=1 filtered=1
app-1  | timestamp=2026-01-17T09:21:31.251Z level=INFO message="HTTP request completed" method=GET path=/api/users/search status=200 duration=770.917µs remote_addr=172.30.0.1:33542 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.276Z level=DEBUG message="HTTP request received" method=POST path=/api/chats remote_addr=172.30.0.1:33550 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:31.276Z level=DEBUG message="API request received" method=POST path=/api/chats query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:31.276Z level=INFO message="CreateChat: creating new chat" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 type=direct name=<nil> user_count=1
app-1  | timestamp=2026-01-17T09:21:31.276Z level=DEBUG message="Getting direct chat" user1_id=43101e86-cb23-4e57-8d30-6c17024db6c1 user2_id=6bacaa55-9df3-4c8a-a695-46830eb2b176
app-1  | timestamp=2026-01-17T09:21:31.277Z level=DEBUG message="Direct chat not found" user1_id=43101e86-cb23-4e57-8d30-6c17024db6c1 user2_id=6bacaa55-9df3-4c8a-a695-46830eb2b176
app-1  | timestamp=2026-01-17T09:21:31.277Z level=INFO message="Creating chat" type=direct name=<nil> created_by=43101e86-cb23-4e57-8d30-6c17024db6c1 user_count=1
app-1  | timestamp=2026-01-17T09:21:31.277Z level=DEBUG message="Chat created in database" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.278Z level=DEBUG message="Added creator as chat member" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:31.278Z level=DEBUG message="Added chat member" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176
app-1  | timestamp=2026-01-17T09:21:31.279Z level=DEBUG message="Invalidating user chats cache" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:31.279Z level=DEBUG message="User chats cache invalidated" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 key=chats:43101e86-cb23-4e57-8d30-6c17024db6c1 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:31.279Z level=DEBUG message="Invalidating user chats cache" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176
app-1  | timestamp=2026-01-17T09:21:31.279Z level=DEBUG message="User chats cache invalidated" user_id=6bacaa55-9df3-4c8a-a695-46830eb2b176 key=chats:6bacaa55-9df3-4c8a-a695-46830eb2b176 deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:31.279Z level=INFO message="Chat created successfully" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f type=direct total_members=2
app-1  | timestamp=2026-01-17T09:21:31.279Z level=INFO message="CreateChat: chat created successfully" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 type=direct
app-1  | timestamp=2026-01-17T09:21:31.279Z level=DEBUG message="Getting chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.280Z level=DEBUG message="Retrieved chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f member_count=2
app-1  | timestamp=2026-01-17T09:21:31.280Z level=INFO message="HTTP request completed" method=POST path=/api/chats status=201 duration=3.736ms remote_addr=172.30.0.1:33550 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:31.316Z level=DEBUG message="HTTP request received" method=POST path=/api/messages remote_addr=172.30.0.1:33552 user_agent=curl/8.7.1 query=""
app-1  | timestamp=2026-01-17T09:21:31.316Z level=DEBUG message="API request received" method=POST path=/api/messages query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:31.316Z level=INFO message="SendMessage: sending message" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f content_type=text
app-1  | timestamp=2026-01-17T09:21:31.316Z level=DEBUG message="Checking chat membership" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:31.317Z level=DEBUG message="User is a chat member" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:31.317Z level=INFO message="Saving message" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f sender_id=43101e86-cb23-4e57-8d30-6c17024db6c1 content_type=text has_reply=false forwarded=false
app-1  | timestamp=2026-01-17T09:21:31.317Z level=DEBUG message="Message inserted in database" message_id=6f274d33-31d6-42d5-989e-f3b0ca004973
app-1  | timestamp=2026-01-17T09:21:31.317Z level=DEBUG message="Getting chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.318Z level=DEBUG message="Retrieved chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f member_count=2
app-1  | timestamp=2026-01-17T09:21:31.318Z level=DEBUG message="Setting message status for members" message_id=6f274d33-31d6-42d5-989e-f3b0ca004973 member_count=2
app-1  | timestamp=2026-01-17T09:21:31.319Z level=DEBUG message="Invalidating chat messages cache" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.319Z level=DEBUG message="Chat messages cache invalidated" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f key=messages:eb781405-1188-4b58-bb52-1a2ea039e90f deleted_keys=0
app-1  | timestamp=2026-01-17T09:21:31.319Z level=INFO message="Message saved successfully" message_id=6f274d33-31d6-42d5-989e-f3b0ca004973 chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f sender_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:31.319Z level=DEBUG message="Getting chat" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.320Z level=DEBUG message="Chat retrieved" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f type=direct
app-1  | timestamp=2026-01-17T09:21:31.320Z level=DEBUG message="Getting chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f
app-1  | timestamp=2026-01-17T09:21:31.320Z level=DEBUG message="Retrieved chat members" chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f member_count=2
app-1  | timestamp=2026-01-17T09:21:31.320Z level=DEBUG message="Getting users by IDs" user_count=2
app-1  | timestamp=2026-01-17T09:21:31.320Z level=DEBUG message="Users retrieved by IDs" requested=2 found=2
app-1  | timestamp=2026-01-17T09:21:31.320Z level=INFO message="SendMessage: message sent successfully" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 chat_id=eb781405-1188-4b58-bb52-1a2ea039e90f message_id=6f274d33-31d6-42d5-989e-f3b0ca004973
app-1  | timestamp=2026-01-17T09:21:31.320Z level=INFO message="HTTP request completed" method=POST path=/api/messages status=201 duration=3.981583ms remote_addr=172.30.0.1:33552 user_agent=curl/8.7.1
app-1  | timestamp=2026-01-17T09:21:41.409Z level=DEBUG message="HTTP request received" method=GET path=/ remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:41.409Z level=DEBUG message="Serving SPA index" path=/ method=GET
app-1  | timestamp=2026-01-17T09:21:41.409Z level=INFO message="HTTP request completed" method=GET path=/ status=304 duration=214.333µs remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.430Z level=DEBUG message="HTTP request received" method=GET path=/static/style.css remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:41.431Z level=INFO message="HTTP request completed" method=GET path=/static/style.css status=304 duration=279.166µs remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.431Z level=DEBUG message="HTTP request received" method=GET path=/static/app.js remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:41.432Z level=INFO message="HTTP request completed" method=GET path=/static/app.js status=200 duration=920.208µs remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.443Z level=DEBUG message="HTTP request received" method=GET path=/api/chats remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:41.443Z level=DEBUG message="API request received" method=GET path=/api/chats query="" content_type=""
app-1  | timestamp=2026-01-17T09:21:41.443Z level=INFO message="GetChats: fetching user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.443Z level=DEBUG message="Getting user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.443Z level=DEBUG message="Getting cached user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.443Z level=DEBUG message="HTTP request received" method=GET path=/api/contacts remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="API request received" method=GET path=/api/contacts query="" content_type=""
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="GetContacts: fetching contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="Getting contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="HTTP request received" method=GET path=/ws remote_addr=172.30.0.1:48534 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query="token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI"
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="HandleWS: validating token"
app-1  | timestamp=2026-01-17T09:21:41.444Z level=INFO message="HandleWS: upgrading to WebSocket" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec session_id=b5a3f3d2-e254-4766-84bc-e5f365e846e6
app-1  | timestamp=2026-01-17T09:21:41.444Z level=DEBUG message="User chats not found in cache" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec key=chats:6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.446Z level=DEBUG message="Contacts retrieved" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_count=0
app-1  | timestamp=2026-01-17T09:21:41.446Z level=DEBUG message="GetContacts: retrieved contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_count=0
app-1  | timestamp=2026-01-17T09:21:41.446Z level=INFO message="HTTP request completed" method=GET path=/api/contacts status=200 duration=2.662875ms remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.444Z level=ERROR message="HandleWS: WebSocket upgrade error" error="websocket: response does not implement http.Hijacker" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:41.446Z level=ERROR message="HTTP request completed" method=GET path=/ws status=500 duration=2.50975ms remote_addr=172.30.0.1:48534 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.446Z level=DEBUG message="Request details for error" method=GET path=/ws query="token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI" headers="map[Accept:[*/*] Accept-Encoding:[gzip, deflate, br, zstd] Accept-Language:[en-US,en;q=0.9] Cache-Control:[no-cache] Connection:[Upgrade] Origin:[http://localhost:8080] Pragma:[no-cache] Sec-Fetch-Dest:[empty] Sec-Fetch-Mode:[websocket] Sec-Fetch-Site:[same-origin] Sec-Websocket-Extensions:[permessage-deflate] Sec-Websocket-Key:[n9RapWlgE8nhyPhlq+QrPg==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0]]"
app-1  | timestamp=2026-01-17T09:21:41.448Z level=DEBUG message="Retrieved user chats from database" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:41.448Z level=DEBUG message="GetChats: retrieved chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:41.448Z level=INFO message="HTTP request completed" method=GET path=/api/chats status=200 duration=5.206958ms remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:41.448Z level=DEBUG message="Caching user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:41.449Z level=DEBUG message="User chats cached successfully" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec key=chats:6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0 ttl=10m
app-1  | timestamp=2026-01-17T09:21:42.481Z level=DEBUG message="HTTP request received" method=GET path=/ remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:42.481Z level=DEBUG message="Serving SPA index" path=/ method=GET
app-1  | timestamp=2026-01-17T09:21:42.481Z level=INFO message="HTTP request completed" method=GET path=/ status=304 duration=703.25µs remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:42.511Z level=DEBUG message="HTTP request received" method=GET path=/ws remote_addr=172.30.0.1:48546 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query="token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI"
app-1  | timestamp=2026-01-17T09:21:42.511Z level=DEBUG message="HandleWS: validating token"
app-1  | timestamp=2026-01-17T09:21:42.512Z level=INFO message="HandleWS: upgrading to WebSocket" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec session_id=b5a3f3d2-e254-4766-84bc-e5f365e846e6
app-1  | timestamp=2026-01-17T09:21:42.512Z level=ERROR message="HandleWS: WebSocket upgrade error" error="websocket: response does not implement http.Hijacker" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.511Z level=DEBUG message="HTTP request received" method=GET path=/api/contacts remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:42.512Z level=ERROR message="HTTP request completed" method=GET path=/ws status=500 duration=629.166µs remote_addr=172.30.0.1:48546 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="API request received" method=GET path=/api/contacts query="" content_type=""
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="GetContacts: fetching contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="Getting contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.511Z level=DEBUG message="HTTP request received" method=GET path=/api/chats remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="API request received" method=GET path=/api/chats query="" content_type=""
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="Request details for error" method=GET path=/ws query="token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI" headers="map[Accept:[*/*] Accept-Encoding:[gzip, deflate, br, zstd] Accept-Language:[en-US,en;q=0.9] Cache-Control:[no-cache] Connection:[Upgrade] Origin:[http://localhost:8080] Pragma:[no-cache] Sec-Fetch-Dest:[empty] Sec-Fetch-Mode:[websocket] Sec-Fetch-Site:[same-origin] Sec-Websocket-Extensions:[permessage-deflate] Sec-Websocket-Key:[BlD3PCBUoZ2TH8C/n3PP7Q==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0]]"
app-1  | timestamp=2026-01-17T09:21:42.512Z level=INFO message="GetChats: fetching user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="Getting user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="Getting cached user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:42.512Z level=DEBUG message="User chats retrieved from cache" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec key=chats:6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:42.516Z level=DEBUG message="Retrieved user chats from database" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:42.516Z level=DEBUG message="GetChats: retrieved chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:42.516Z level=INFO message="HTTP request completed" method=GET path=/api/chats status=200 duration=4.704125ms remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:42.516Z level=DEBUG message="Caching user chats" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0
app-1  | timestamp=2026-01-17T09:21:42.517Z level=DEBUG message="User chats cached successfully" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec key=chats:6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec chat_count=0 ttl=10m
app-1  | timestamp=2026-01-17T09:21:42.518Z level=DEBUG message="Contacts retrieved" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_count=0
app-1  | timestamp=2026-01-17T09:21:42.518Z level=DEBUG message="GetContacts: retrieved contacts" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_count=0
app-1  | timestamp=2026-01-17T09:21:42.518Z level=INFO message="HTTP request completed" method=GET path=/api/contacts status=200 duration=6.521708ms remote_addr=172.30.0.1:48516 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:44.278Z level=DEBUG message="HTTP request received" method=GET path=/api/users/search remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query="q="
app-1  | timestamp=2026-01-17T09:21:44.278Z level=DEBUG message="API request received" method=GET path=/api/users/search query="q=" content_type=""
app-1  | timestamp=2026-01-17T09:21:44.278Z level=WARN message="SearchUsers: missing search query" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:44.278Z level=WARN message="HTTP request completed" method=GET path=/api/users/search status=400 duration=89.167µs remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:44.278Z level=DEBUG message="Request details for error" method=GET path=/api/users/search query="q=" headers="map[Accept:[*/*] Accept-Encoding:[gzip, deflate, br, zstd] Accept-Language:[en-US,en;q=0.9] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI] Connection:[keep-alive] Priority:[u=0] Referer:[http://localhost:8080/] Sec-Fetch-Dest:[empty] Sec-Fetch-Mode:[cors] Sec-Fetch-Site:[same-origin] User-Agent:[Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0]]"
app-1  | timestamp=2026-01-17T09:21:46.269Z level=DEBUG message="HTTP request received" method=GET path=/api/users/search remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query="q=M"
app-1  | timestamp=2026-01-17T09:21:46.269Z level=DEBUG message="API request received" method=GET path=/api/users/search query="q=M" content_type=""
app-1  | timestamp=2026-01-17T09:21:46.269Z level=INFO message="SearchUsers: searching users" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec query=M
app-1  | timestamp=2026-01-17T09:21:46.269Z level=DEBUG message="SearchUsers: search parameters" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec query=M limit=20
app-1  | timestamp=2026-01-17T09:21:46.269Z level=INFO message="Searching users" query=M limit=20
app-1  | timestamp=2026-01-17T09:21:46.270Z level=INFO message="User search completed" query=M results=2 limit=20
app-1  | timestamp=2026-01-17T09:21:46.270Z level=DEBUG message="SearchUsers: search completed" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec query=M found=2 filtered=2
app-1  | timestamp=2026-01-17T09:21:46.270Z level=INFO message="HTTP request completed" method=GET path=/api/users/search status=200 duration=793.208µs remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:48.190Z level=DEBUG message="HTTP request received" method=POST path=/api/contacts remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:48.190Z level=DEBUG message="API request received" method=POST path=/api/contacts query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:48.190Z level=INFO message="AddContact: adding contact" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:48.190Z level=DEBUG message="AddContact: contact request" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec target_user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 display_name=<nil>
app-1  | timestamp=2026-01-17T09:21:48.190Z level=DEBUG message="Getting user by ID" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:48.191Z level=DEBUG message="User retrieved by ID" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 name=Manav
app-1  | timestamp=2026-01-17T09:21:48.191Z level=INFO message="Adding contact" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_id=43101e86-cb23-4e57-8d30-6c17024db6c1 display_name=""
app-1  | timestamp=2026-01-17T09:21:48.191Z level=ERROR message="Failed to add contact" error="pq: insert or update on table \"contacts\" violates foreign key constraint \"contacts_user_id_fkey\"" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:48.191Z level=ERROR message="AddContact: failed to add contact" error="pq: insert or update on table \"contacts\" violates foreign key constraint \"contacts_user_id_fkey\"" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec target_user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:48.191Z level=ERROR message="HTTP request completed" method=POST path=/api/contacts status=500 duration=1.173375ms remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:48.191Z level=DEBUG message="Request details for error" method=POST path=/api/contacts query="" headers="map[Accept:[*/*] Accept-Encoding:[gzip, deflate, br, zstd] Accept-Language:[en-US,en;q=0.9] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI] Connection:[keep-alive] Content-Length:[50] Content-Type:[application/json] Origin:[http://localhost:8080] Priority:[u=0] Referer:[http://localhost:8080/] Sec-Fetch-Dest:[empty] Sec-Fetch-Mode:[cors] Sec-Fetch-Site:[same-origin] User-Agent:[Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0]]"
app-1  | timestamp=2026-01-17T09:21:49.673Z level=DEBUG message="HTTP request received" method=POST path=/api/contacts remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0" query=""
app-1  | timestamp=2026-01-17T09:21:49.673Z level=DEBUG message="API request received" method=POST path=/api/contacts query="" content_type=application/json
app-1  | timestamp=2026-01-17T09:21:49.673Z level=INFO message="AddContact: adding contact" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec
app-1  | timestamp=2026-01-17T09:21:49.673Z level=DEBUG message="AddContact: contact request" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec target_user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 display_name=<nil>
app-1  | timestamp=2026-01-17T09:21:49.673Z level=DEBUG message="Getting user by ID" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:49.674Z level=DEBUG message="User retrieved by ID" user_id=43101e86-cb23-4e57-8d30-6c17024db6c1 name=Manav
app-1  | timestamp=2026-01-17T09:21:49.674Z level=INFO message="Adding contact" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_id=43101e86-cb23-4e57-8d30-6c17024db6c1 display_name=""
app-1  | timestamp=2026-01-17T09:21:49.674Z level=ERROR message="Failed to add contact" error="pq: insert or update on table \"contacts\" violates foreign key constraint \"contacts_user_id_fkey\"" user_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec contact_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:49.674Z level=ERROR message="AddContact: failed to add contact" error="pq: insert or update on table \"contacts\" violates foreign key constraint \"contacts_user_id_fkey\"" requester_id=6c5ae5e2-4cd7-4af6-aaf4-71622fae62ec target_user_id=43101e86-cb23-4e57-8d30-6c17024db6c1
app-1  | timestamp=2026-01-17T09:21:49.674Z level=ERROR message="HTTP request completed" method=POST path=/api/contacts status=500 duration=1.107917ms remote_addr=172.30.0.1:48520 user_agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0"
app-1  | timestamp=2026-01-17T09:21:49.674Z level=DEBUG message="Request details for error" method=POST path=/api/contacts query="" headers="map[Accept:[*/*] Accept-Encoding:[gzip, deflate, br, zstd] Accept-Language:[en-US,en;q=0.9] Authorization:[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNmM1YWU1ZTItNGNkNy00YWY2LWFhZjQtNzE2MjJmYWU2MmVjIiwic2Vzc2lvbl9pZCI6ImI1YTNmM2QyLWUyNTQtNDc2Ni04NGJjLWU1ZjM2NWU4NDZlNiIsImlzcyI6ImNoaXRjaGF0IiwiZXhwIjoxNzY5MTk3NDA0LCJpYXQiOjE3Njg1OTI2MDR9.kRmyT6DVdOIz8Pd638TfTC82ktdYQo-1N6fubULjWkI] Connection:[keep-alive] Content-Length:[50] Content-Type:[application/json] Origin:[http://localhost:8080] Priority:[u=0] Referer:[http://localhost:8080/] Sec-Fetch-Dest:[empty] Sec-Fetch-Mode:[cors] Sec-Fetch-Site:[same-origin] User-Agent:[Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:147.0) Gecko/20100101 Firefox/147.0]]"
[Kapp-1 exited with code 2
